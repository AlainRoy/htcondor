/**************************************************************************
** These are all the definitions that are shared between all versions of 
** Solaris
**
** At the end of this file, we include the version-specific
** config files as needed.   
**************************************************************************/

/**************************************************************************
** Shared Solaris Settings
**************************************************************************/

#define SimpleLibC /lib/libc.a
#define LibC SimpleLibC  

#define IS_V5				YES

#define NEEDS_KBDD			NO

#define DO_BENCHMARKING			YES

#define DOES_CHECKPOINTING      YES
#define DOES_COMPRESS_CKPT	YES
#define DOES_REMOTE_SYSCALLS    YES 
#define DOES_SAVE_SIGSTATE	YES

#define	HAS_DYNAMIC_USER_JOBS	YES

#define HAS_GSI				YES
#define HAS_OPENSSL			YES

#define HAS_NDBM			YES
#define HAS_FSTATFS			YES
#define NEEDS_XDR_FLOAT			NO
#define NEEDS_GROW_STACK		NO
#define NEEDS_SPECIAL_SIGVEC		YES
#define NEEDS_FAKE_GETMNT		YES
#define HAS_VOID_SIGNAL_RETURN		YES
#define HAS_AR_S_OPTION			YES
#define HAS_RANLIB_TOUCH		YES
#define HAS_CP_PRESERVE			YES
#define NEEDS_SPECIAL_SETJMP		NO
#ifndef FORTRAN_HAS_RECURSION
#define FORTRAN_HAS_RECURSION YES
#endif
#define HAS_FLOCK			NO
#define HAS_ADJTIME			YES
#define HAS_GETDIRENTRIES		NO
#define HAS_GETDTABLESIZE		NO
#define HAS_GETHOSTNAME			YES
#define HAS__UTSSYS			NO
#define HAS_GETPAGESIZE			NO
#define HAS_GETPGRP			YES
#define HAS_GETPGRP2			NO
#define HAS_KILLPG			YES
#define HAS_SETHOSTNAME			YES
#define HAS_UTIMES			YES
#define HAS_UTIME			NO
#define HAS_VHANGUP			YES
#define HAS_SETEGID			YES
#define HAS_SETEUID			YES
#define HAS_GETWD			YES
#define HAS_INSQUE			YES
#define HAS_DLOPEN			YES
#define HAS_DAGMAN_HELPER   NO
#define NEEDS_64BIT_SYSCALLS		YES
#define NEEDS_64BIT_STRUCTS		YES

#define WANT_PVM			NO
#define	PVM_ARCH			SUN4SOL2
#define	HAS_PURIFY			YES


/*
    In the test suite, we only need to make sure we've got the network 
    libs, not all the other stuff for static linking, gcc, etc.  This
    is common to all versions of Solaris, so we can do it here.
*/
#define TestPlatformLdFlags -lnsl -lsocket -lresolv

/*
    When we're linking for purify, we don't want all the static junk,
    either, but we need more libs than just the test suite.  So, we 
    define this here to specify the flags we want to give to the
    linker when we're building the Condor Daemons under purify.
*/ 
#define PurifyPlatformLdFlags -lkstat -lelf -lnsl -lsocket -lresolv

/*
NOTE: The following definition of PlatformLdFlags assumes that the
compiler libraries (libgcc and libstdc++) are available _only_ as
static libraries, so we do not need to do anything special to cause
them to be statically linked.  We want them to be statically linked
so people can run condor binaries on machines where gcc has never
been installed, since this is common for Solaris boxes.

We used to append $(GCC_STATIC_LIBS) to PlatformLdFlags, however, this
caused libc to be statically linked, and that caused runtime errors on
binaries compiled on Solaris 9 when run on Solaris 10.  Why was libc
statically linked you may ask?  Because GCC_STATIC_LIBS was defined
like this: -Wl,-bstatic -lstdc++ -lgcc.  This turns on static linking
but does not turn it off.  The compiler appends a bunch of standard
libs, including -lstdc++, -lgcc, and -lc.  Therefore, libc was being
statically linked.  We could have turned off static linking with
-Wl,-bdyanamic, so the libs appended by the compiler would not be
statically linked.  However, among the libs appended by the compiler
are the very libs we are trying to link statically, so if they were
available both statically and dynamically, they would be linked both
ways.  The version of gcc currently in use on the Solaris build
machines is 2.95.3, which does not support the option -nodefaultlibs,
so we can't easily prevent the compiler from doing this.  It does
support -nostdlibs, but that option also disables the linking of all
other standard things, including the runtime object files, so it
becomes a rather messy situation to make sure we link in all the stuff
we need without getting more than we want.

Therefore, we do not explicitly call for static linking of the
compiler libs.  Instead, we depend on the compiler being installed
with _only_ static versions of libgcc and libstdc++.
*/

#define PlatformLdFlags -lkstat -lelf -lsocket -lresolv -lnsl -lm -lc

/**************************************************************************
** Include OS version-specific config files
**************************************************************************/

#ifdef OSVersionIncludeFile
#include OSVersionIncludeFile
#endif


/**************************************************************************
** Shared things we only can do after we get the version specific
** settings defined. 
**************************************************************************/
