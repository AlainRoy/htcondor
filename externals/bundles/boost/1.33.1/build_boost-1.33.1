#!/bin/sh

. $EXTERNALS_CONFIG

tar zxvf boost_1_33_1.tar.gz

if [ `uname` = "Darwin" ] ; then
	patch -p0 -i macos.patch
	if [ $? -ne 0 ]
	then
		echo "patch macos.patch failed!"
		exit 1
	fi
fi

cd boost_1_33_1 && echo Changed directory to `pwd`

# This version of boost is used to build the CREAM client libraries.
# The tarball was downloaded from
#  http://voxel.dl.sourceforge.net/sourceforge/boost/boost_1_33_1.tar.gz

cd tools/build/jam_src

./build.sh
if [ $? -ne 0 ]
then
	echo "build.sh failed!"
	exit 1
fi

PATH=`pwd`/`ls -d bin.*/`:$PATH
export PATH
cd ../../..

bjam --with-thread -sNO_COMPRESSION=1 -sTOOLS=gcc --prefix=$PACKAGE_INSTALL_DIR install
if [ $? -ne 0 ]
then
	echo "bjam failed!"
	exit 1
fi

ln -s $PACKAGE_INSTALL_DIR/include/boost-*/boost $PACKAGE_INSTALL_DIR/include

exit 0;
