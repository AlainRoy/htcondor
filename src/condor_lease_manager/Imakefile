NAME = condor_lease_manager
all_target( $(NAME) )
TESTS =  	condor_lease_manager_test

soapobjs(matchmaker)

CLASSAD_ANALYSIS = ../classad_analysis
CLASSAD_CONVERSION = $(CLASSAD_CONVERSION)
CLASSAD_CONVERSION_INC = -I$(CLASSAD_ANALYSIS)
CLASSAD_CONVERSION_LIBDEFS =  -L$(CLASSAD_ANALYSIS) -lconversion
NEW_CLASSAD_LIBDEFS = -L$(NEW_CLASSADS_LIB) -lclassad_ns

SC_DEMO_DEFS =
SC_DEMO_INCLUDES = -I$(NEW_CLASSADS_INC) $(CLASSAD_CONVERSION_INC)
SC_DEMO_FLAGS = $(SC_DEMO_DEFS) $(SC_DEMO_INCLUDES)
C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS) $(SC_DEMO_FLAGS)
INST_C_PLUS_FLAGS = $(STD_C_FLAGS) $(GPP_VERS_FLAGS) $(SC_DEMO_FLAGS)
CFLAGS  = $(STD_C_FLAGS) $(SC_DEMO_FLAGS)


CFLAGS = $(STD_C_FLAGS)
LIB = $(DAEMONCORE_LIB) $(STD_LIBS) $(NEW_CLASSAD_LIBDEFS) \
	$(CONFIGURE_GSOAP_LDFLAGS) \
	$(CLASSAD_CONVERSION_LIBDEFS)
TEST_LIB =  $(STD_LIBS) $(NEW_CLASSAD_LIBDEFS) \
	$(CLASSAD_CONVERSION_LIBDEFS)

OBJ =	lease_manager_main.o		\
	lease_manager.o			\
	lease_manager_resources.o		\
	lease_manager_lease.o $(SOAP_OBJS)

c_plus_target($(NAME),$(OBJ),$(LIB))
template_inst( lease_manager.cpp, lease_manager.o )
template_inst( lease_manager_resources.cpp, lease_manager_resources.o )

release_target($(NAME),sbin,EXECUTABLE_MODE)
strip_target($(NAME),sbin,EXECUTABLE_MODE)
static_target($(NAME),$(OBJ),$(LIB),$(STATIC_DIR)/sbin)
pure_c_plus_target($(NAME).pure,$(OBJ),$(LIB))
purecov_c_plus_target($(NAME).pc,$(OBJ),$(LIB))

c_plus_target( condor_lease_manager_test,lease_manager_test.o,$(TEST_LIB) )
template_inst( lease_manager_test.cpp, lease_manager_test.o )


html:

tests: $(TESTS)

testbin:: all

-include Makelocal.i

gen_soapfiles(matchmaker,condorMatchmaker)
