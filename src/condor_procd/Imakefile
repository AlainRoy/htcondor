all_target(procd_client.a condor_procd procd_ctl)

CFLAGS = -I ../condor_procapi \
         $(STD_C_FLAGS)
C_PLUS_FLAGS = -I ../condor_procapi \
               $(STD_C_PLUS_FLAGS)

PROCD_OBJ=procd_main.o procd_common.o \
          proc_family_server.o local_server.UNIX.o \
          named_pipe_reader.o named_pipe_writer.o \
          named_pipe_watchdog_server.o named_pipe_watchdog.o \
          named_pipe_util.o \
          proc_family_monitor.o proc_family.o proc_family_member.o \
          proc_family_tracker.o parent_tracker.o login_tracker.o \
          procd_instantiate.o
#if IS_LINUX
PROCD_OBJ+= group_tracker.o gid_pool.o
#endif
template_inst(procd_instantiate.C,procd_instantiate.o)
public_c_plus_target(condor_procd, \
                     sbin, \
                     $(PROCD_OBJ), \
                     $(STD_LIBS))

LIB_OBJ=proc_family_client.o proc_family_io.o local_client.UNIX.o \
        named_pipe_reader.o named_pipe_writer.o \
        named_pipe_watchdog.o named_pipe_util.o
library_target(procd_client.a,$(LIB_OBJ))

LOCAL_SERVER_TEST_OBJ=local_server_test.o local_server.UNIX.o \
                      named_pipe_reader.o named_pipe_writer.o \
                      named_pipe_watchdog_server.o \
                      named_pipe_util.o
c_plus_target(local_server_test,$(LOCAL_SERVER_TEST_OBJ),$(STD_LIBS))

LOCAL_CLIENT_TEST_OBJ=local_client_test.o local_client.UNIX.o \
                      named_pipe_reader.o named_pipe_writer.o \
                      named_pipe_util.o
c_plus_target(local_client_test,$(LOCAL_CLIENT_TEST_OBJ),$(STD_LIBS))

IMPORT_LINKS=../../config/import_links
import(../condor_util_lib,condor_full_io.o)
import(../condor_util_lib,condor_blkng_full_disk_io.o)
import(../condor_util_lib,condor_pidenvid.o)
import(../condor_c++_util,condor_open.o)
import(../condor_procapi,procapi.o)
IMPORT_OBJ=condor_full_io.o \
           condor_blkng_full_disk_io.o \
           condor_pidenvid.o \
           condor_open.o

SNAPSHOT_OBJ=snapshot.o cprocapi.o dprintf_lite.o $(IMPORT_OBJ)
c_plus_nowrap_target(procd_snapshot,$(SNAPSHOT_OBJ),$(PROCAPI_LIB))
SNAPSHOT_FORMAT_OBJ=snapfmt.o dprintf_lite.o $(IMPORT_OBJ)
c_plus_nowrap_target(procd_snapshot_format,\
                     $(SNAPSHOT_FORMAT_OBJ),\
                     $(PROCAPI_LIB))

PROCD_CTL_OBJ=procd_ctl.o
public_c_plus_target(procd_ctl,bin,$(PROCD_CTL_OBJ),$(STD_LIBS))

html:
release:: all
stripped:: all
static:: all
clean::
testbin:: all
