-include Makefile.local

C_PLUS_FLAGS = -Wall $(STD_C_PLUS_FLAGS)
CFLAGS = -Wall $(STD_C_FLAGS) -I$(NEW_CLASSADS_INC)
INST_C_PLUS_FLAGS = $(STD_C_FLAGS)

ANA_OBJ = analysis.o boolExpr.o condition.o multiProfile.o profile.o \
	resourceGroup.o  boolValue.o explain.o interval.o result.o \

CONV_OBJ = conversion.o

GM_OBJ = portGraph.o gmr.o gangster.o

LIB = $(STD_LIBS) -L$(NEW_CLASSADS_LIB) -lclassad_ns

/* Note that this directory contains Nick's experimental
 * gangmatching stuff, but it's not compiled by default
 */
all_target(libclassad_analysis.a libclassad_conversion.a)
library_target(libclassad_analysis.a, $(ANA_OBJ))
library_target(libclassad_conversion.a, $(CONV_OBJ))
library_target(libclassad_gangmatch.a, $(GM_OBJ))

release:: all
static:: all
stripped:: all
testbin:: all
html:

c_plus_target(conversion_test,testConversion.o,libclassad_conversion.a $(LIB))
c_plus_target(aec_test,testAEC.o,libclassad_conversion.a $(LIB))
c_plus_target(aet_test,testAET.o,libclassad_conversion.a $(LIB))
c_plus_target(start_analyzer,start_analyzer.o,libclassad_analysis.a libclassad_conversion.a $(LIB))
c_plus_target(ggm_test,testPortGraph.o,libclassad_gangmatch.a libclassad_analysis.a $(LIB))
c_plus_target(analysis_test,testAnalysis.o, libclassad_analysis.a libclassad_conversion.a $(LIB))

/*
c_plus_target(coll_test,coll_test.o,$(LIB))
c_plus_target(interval_test,interval_test.o,$(LIB))
c_plus_target(boolExpr_test,boolExpr_test.o,$(LIB))
c_plus_target(bt_test,testBoolTable.o,$(LIB))
c_plus_target(fai_test,testFAI.o,$(LIB))
*/
