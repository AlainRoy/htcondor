NAME = condor_q
all_target($(NAME))

#if WANT_CLASSAD_ANALYSIS
ANALYSIS_FLAGS = -DWANT_CLASSAD_ANALYSIS -I$(NEW_CLASSADS_INC)
ANALYSIS_LIBS  = ../classad_analysis/libanalysis.a ../classad_analysis/libconversion.a -L$(NEW_CLASSADS_LIB) -lclassad_ns
#else
ANALYSIS_FLAGS = 
ANALYSIS_LIBS  = 
#endif

LDFLAGS = $(STD_LDFLAGS)
C_PLUS_FLAGS = $(ANALYSIS_FLAGS) $(STD_C_PLUS_FLAGS) $(QUILL_INC) $(TT_INC) $(CONFIGURE_POSTGRESQL_CFLAGS)
LIB = $(ANALYSIS_LIBS) $(STD_LIBS) $(QUILL_LIB) $(TT_LIB) $(CONFIGURE_POSTGRESQL_LDFLAGS)

OBJ = queue.o queue_instantiate.o

public_c_plus_target($(NAME),bin,$(OBJ),$(LIB))

html:

/*
  NOTE: since we're using a different input file depending on where
  we're copying to, we can't use the unified public_copy_target().
*/ 
#ifdef HAS_CONDOR_ANALYZE
release_copy_target($(CONDOR_ANALYZE_RELEASE),bin,condor_analyze,EXECUTABLE_MODE)
strip_copy_target($(CONDOR_ANALYZE_STRIP),bin,condor_analyze,EXECUTABLE_MODE)
#if HAS_STATIC
static_copy_target($(CONDOR_ANALYZE_STATIC),bin,condor_analyze,EXECUTABLE_MODE)
#endif /* HAS_STATIC */
#endif /* HAS_CONDOR_ANALYZE */

testbin:: all
