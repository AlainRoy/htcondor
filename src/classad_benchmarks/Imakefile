PROGRAMS = \
	classad_benchmark_constraint-new \
	classad_benchmark_constraint-old

all_target( $(PROGRAMS) )
new:	classad_benchmark_constraint-new
old:	classad_benchmark_constraint-old


CFLAGS = $(STD_C_FLAGS)
C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS)
LIB = $(STD_LIBS)

OBJ =	\
	classad_benchmark_constraint_options.o	\
	classad_benchmark_constraint_base.o	\
	classad_benchmark_constraint_new.o	\
	classad_benchmark_constraint_old.o


# Individual targets
new: classad_benchmark_constraint-new
c_plus_target(classad_benchmark_constraint-new,$(OBJ) classad_benchmark_constraint-new.o,$(LIB))
old: classad_benchmark_constraint-old
c_plus_target(classad_benchmark_constraint-old,$(OBJ) classad_benchmark_constraint-old.o,$(LIB))

classad_benchmark_constraint-new.o : classad_benchmark_constraint_main.cpp
	$(CPlusPlus) $(C_PLUS_FLAGS) -D BENCHMARK_NEW_CLASSADS -c $< -o $@
classad_benchmark_constraint-old.o : classad_benchmark_constraint_main.cpp
	$(CPlusPlus) $(C_PLUS_FLAGS) -D BENCHMARK_OLD_CLASSADS -c $< -o $@


.SUFFIXES: .ad .newad .oldad
.ad.newad:
	./convert_to_new < $< > $@
.ad.oldad:
	./convert_to_old < $< > $@
