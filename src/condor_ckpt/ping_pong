#! /bin/csh

if( $#argv != 2 ) then
	echo Usage: ping_pong prog_name host_name
	exit 1 
endif

set cmd_name = $argv[1]
set host_name = $argv[2]


rcp noenv ${host_name}:
rcp $cmd_name ${host_name}:
noenv $cmd_name

while ( 1 )
	rcp Ckpt.13.13 ${host_name}:
	rsh $host_name noenv $cmd_name __restart__
	if( $status == 13 ) break
	rcp ${host_name}:Ckpt.13.13 .
	noenv $cmd_name __restart__ 
	if( $status == 13 ) break
end
