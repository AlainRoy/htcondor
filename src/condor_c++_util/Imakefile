SRC_DIR = $(SRC_TREE)/condor_c++_util

C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS) -DNEW_PROC -DALLOC_DEBUG

CFLAGS = $(STD_C_FLAGS) -DNEW_PROC

SRC = state_machine_driver.C event_handler.C name_tab.C NON_POSIX.select.C \
		NON_POSIX.set_prog_env.C alarm.C string_set.C proc_obj.C alloc.C \
		filter.C directory.C my_hostname.C file_lock.C disk.C up_down.C
OBJ = state_machine_driver.o event_handler.o name_tab.o NON_POSIX.select.o \
		NON_POSIX.set_prog_env.o alarm.o string_set.o proc_obj.o alloc.o \
		filter.o directory.o my_hostname.o file_lock.o disk.o up_down.o

#if IS_R6000_AIX32
TEST_LIBS = ../condor_util_lib/util_lib.a cplus_lib.a /usr/lib/libbsd.a
#else
TEST_LIBS = cplus_lib.a ../condor_util_lib/util_lib.a
#endif

all_target( cplus_lib.a )

library_target( cplus_lib.a,$(OBJ))
release_library(cplus_lib.a,$(RELEASE_DIR)/lib)

c_plus_target(test_locks,test_locks.o,$(TEST_LIBS))

tags_target($(SRC),$(NULL))
depend_target($(SRC))
