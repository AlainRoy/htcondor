#!/usr/bin/env perl
##**************************************************************
##
## Copyright (C) 1990-2007, Condor Team, Computer Sciences Department,
## University of Wisconsin-Madison, WI.
## 
## Licensed under the Apache License, Version 2.0 (the "License"); you
## may not use this file except in compliance with the License.  You may
## obtain a copy of the License at
## 
##    http://www.apache.org/licenses/LICENSE-2.0
## 
## Unless required by applicable law or agreed to in writing, software
## distributed under the License is distributed on an "AS IS" BASIS,
## WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
## See the License for the specific language governing permissions and
## limitations under the License.
##
##**************************************************************


# $Id: remote_declare,v 1.7 2007-11-15 15:23:34 matt Exp $

# Condor implementation of NMI build infrastructure interface.
# This is just a trivial hard-coded declare list, which is the 
# same on all platforms, all versions, etc.

use strict;
use Getopt::Long;
use vars qw/ $opt_externals_only $opt_release_only /;
GetOptions(
    'externals-only' => \$opt_externals_only,
    'release-only' => \$opt_release_only
);

open( LIST, ">tasklist.nmi" ) || die "Can't open tasklist.nmi: $!\n";
if ($ENV{NMI_PLATFORM} =~ /winnt/) {
    print LIST "win_make\n";
    print LIST "win_release\n";
    print LIST "win_package\n";
} else {
    print LIST "externals\n";
    if (!defined($opt_externals_only)) {
	print LIST "release\n";
	if (!defined($opt_release_only)) {
	    print LIST "testbin\n";
	    print LIST "static\n";
	    print LIST "stripped\n";
	    print LIST "public\n";
	}
    }
}
close( LIST );
