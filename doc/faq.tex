\index{Condor!FAQ|(}
\index{Condor!Frequently Asked Questions|(}
\index{FAQ|(}
\index{Frequently Asked Questions|(}

This is where you can find quick answers to some commonly asked
questions about Condor.

\section{Obtaining \& Installing Condor}
\index{Condor!downloading|(}
\index{Condor!distribution|(}
\index{Condor!getting|(}
\index{Condor!binaries|(}

\subsection{Where can I download Condor?}

Condor can be downloaded from
\Url{http://www.cs.wisc.edu/condor/downloads} (Madison, Wisconsin,
USA) or \Url{http://www.bo.infn.it/condor-mirror/downloads} (a mirror
site at the Istituto Nazionale di Fisica Nucleare in Bologna, Italy).

\subsection{When I click to download Condor, it sends me back to the downloads page!}

If you are trying to download Condor through a web proxy, try
disabling it.
Our web site uses the ``referring page'' as you navigate through our
download menus in order to give you the right version of Condor, but
sometimes proxies block this information from reaching our web site.

\subsection{What platforms do you support?}

See Section~\ref{sec:Availability}, on
page~\pageref{sec:Availability}.

\index{Condor!binaries|)}

\subsection{Do you distribute source code?}
\index{Condor!source code|(}

At this time we do \Bold{not} distribute source code publicly, but
instead consider requests on a case-by-case basis.
If you need the source code, please email us at
\Email{condor-admin@cs.wisc.edu} explaining why, and we'll get back to
you.

\index{Condor!source code|)}

\subsection{What is ``Personal Condor''?}
\index{Condor!Personal|(}
\index{Personal Condor|(}

Personal Condor is a term used to describe a specific style of Condor
installation suited for individual users who do not have their own
pool of machines, but want to submit Condor jobs to run elsewhere.

A Personal Condor is essentially a one-machine, self-contained Condor
pool which can use ``flocking'' to access resources in other Condor
pools.
See Section~\ref{sec:Flocking}, on page~\pageref{sec:Flocking} for
more information on flocking.

\index{Personal Condor|)}
\index{Condor!Personal|)}
\index{Condor!downloading|)}
\index{Condor!distribution|)}
\index{Condor!getting|)}

\subsection{What do I do now? My installation of Condor does not work.}

What to do to get Condor running properly depends on what sort of
error occurs. 
One common error category are communication errors.
Condor daemon log files report a failure to bind.
Or, the errors in the various log files may be of the form:

\begin{verbatim}
(date and time) Error sending update to collector(s)
(date and time) Can't send end_of_message
(date and time) Error sending UDP update to the collector

(date and time) failed to update central manager

(date and time) Can't send EOM to the collector
\end{verbatim}

This problem can also be observed by running \Condor{status}.
It will give a message of the form:
\begin{verbatim}
Error:  Could not fetch ads --- error communication error
\end{verbatim}

To solve this problem, understand that
Condor uses the first network interface it sees on the machine.
Since machines often have more than one interface,
this problem usually implies that the wrong network
interface is being used.

It is incorrect to use the localhost network interface.
This has IP address 127.0.0.1 on all machines.
To check if this incorrect IP address is being used,
look at the contents of the
CollectorLog file on the pool's
your central manager right after it is started.  
The contents will be of the form:

\begin{verbatim}
5/25 15:39:33 ******************************************************
5/25 15:39:33 ** condor_collector (CONDOR_COLLECTOR) STARTING UP
5/25 15:39:33 ** $CondorVersion: 6.2.0 Mar 16 2001 $
5/25 15:39:33 ** $CondorPlatform: INTEL-LINUX-GLIBC21 $
5/25 15:39:33 ** PID = 18658
5/25 15:39:33 ******************************************************
5/25 15:39:33 DaemonCore: Command Socket at <128.105.101.15:9618>
\end{verbatim}

The last line tells the IP address and port the collector has
bound to and is listening on.
If the IP address is 127.0.0.1, then Condor is definitely using the wrong
network interface.

There are two solutions to this problem.
One solution changes the order of the network interfaces.
The preferred solution
sets which network interface Condor should use
by adding the following parameter to the
local Condor configuration file:

\begin{verbatim}NETWORK_INTERFACE = machine-ip-address\end{verbatim}

Where \verb@machine-ip-address@ is the IP address of the interface you wish
Condor to use.

\section{Setting up Condor}

\subsection{How do I get more than one job to run on my SMP machine?}

Condor will automatically recognize a SMP machine and advertise each
CPU of the machine separately.
For more details, see section~\ref{sec:Configuring-SMP} on
page~\pageref{sec:Configuring-SMP}.

\subsection{How do I set up my machines so that only certain users's
jobs will run on them?}

Restrictions on what jobs will run on a given resource can be easily
specified in the resource's Requirements statement.

To specify that a given machine should only run certain users's jobs,
for example, you could add the following Requirements entry to the
machine's Condor configuration file:

\begin{verbatim}Requirements = (RemoteUser == "userfoo@baz.edu" || RemoteUser == "userbar@baz.edu" )\end{verbatim}

To configure multiple machines to do so, simply create a common
configuration file containing this requirement for them to share.

\subsection{How do I configure Condor to run my jobs only on machines
that have the right packages installed?}
\index{running a job!on only certain machines|(}

This is a two-step process.
First, you need to tell the machines to report that they have special
software installed, and second, you need to tell the jobs to require
machines that have that software.

To tell the machines to report the presence of special software, first
add a parameter to their configuration files like so:

\begin{verbatim}HAS_MY_SOFTWARE = True\end{verbatim}

And then, if there are already STARTD\_EXPRS defined in that file, add
HAS\_MY\_SOFTWARE to them, or, if not, add the line:

\begin{verbatim}STARTD_EXPRS = HAS_MY_SOFTWARE, $(STARTD_EXPRS)\end{verbatim}

\Note For these changes to take effect, each \Condor{startd} you update
needs to be reconfigured with \Condor{reconfig} -startd.

Next, to tell your jobs to only run on machines that have this
software, add a requirements statement to their submit files like so:

\begin{verbatim}Requirements = (HAS_MY_SOFTWARE =?= True)\end{verbatim}

\Note Be sure to use =?= instead of == so that if a machine doesn't have
the HAS\_MY\_SOFTWARE parameter defined, the job's Requirements
expression will not evaluate to ``undefined'', preventing it from
running anywhere!

\index{running a job!on only certain machines|)}

\subsection{How do I configure Condor to only run jobs at night?}

A commonly requested policy for running batch jobs is to only allow
them to run at night, or at other pre-specified times of the day.
Condor allows you to configure this policy with the use of the
\Attr{ClockMin} and \Attr{ClockDay} \Condor{startd} attributes.  
A complete example of how to use these attributes for this kind of
policy is discussed in subsection~\ref{sec:Time-Of-Day-Policy} on
page~\pageref{sec:Time-Of-Day-Policy}, ``A Policy for Only Running
Jobs at Certain Times of the Day'', inside
section~\ref{sec:Configuring-Policy} on ``Configuring The Startd
Policy''
\index{running a job!only at night|)}
\index{running a job!at certain times of day|)}


\subsection{Why will the \Condor{master} not run when a local
configuration file is missing?}

If a \Macro{LOCAL\_CONFIG\_FILE} 
is specified in the global configuration file,
but the specified file does not exist,
the \Condor{master} will not start up, and it prints a variation
of the following example message.

\begin{verbatim}
ERROR: Can't read config file /mnt/condor/hosts/bagel/condor_config.local
\end{verbatim}

This is not a bug; it is a feature!
Condor has always worked this way on purpose.
There is a potentially
large security hole if Condor is configured to read from a file that
does not exist.
By creating that file, a malicious user could
change all sorts of Condor settings.
This is an easy way
to gain root access to a machine,
where the daemons are running as root.

The intent is that
if you've set up your global configuration file to read
from a local configuration file, and the local file is not there,
then something is wrong.
It is better for the \Condor{master} to exit right away and
log an error message than to start up.

If the \Condor{master} continued with the local configuration file
missing, either A) someone could breach security or B) you will have
potentially important configuration information missing.
Consider the example where the local configiguration file was on an NFS
partition and the server was down. 
There would be all sorts of
really important stuff in the local configuration file,
and Condor might do bad things if it started without those settings.  

If supplied it with an empty file, the \Condor{master} works fine.

\section{Running Condor Jobs}

\subsection{I'm at the University of Wisconsin-Madison Computer
Science Dept., and I am having problems!}

Please see the web page \Url{http://www.cs.wisc.edu/condor/uwcs}.
As
it explains, your home directory is in AFS, which by default has
access control restrictions which can prevent Condor jobs from running
properly.
The above URL will explain how to solve the problem.

\subsection{I'm getting a lot of email from Condor.  Can I just delete it all?}

Generally you shouldn't ignore \Bold{all} of the mail Condor sends,
but you can reduce the amount you get by telling Condor that you don't
want to be notified every time a job successfully completes, only when
a job experiences an error.
To do this, include a line in your submit file like the following:

\begin{verbatim}Notification = Error\end{verbatim}

See the Notification parameter in the \Condor{q} man page on
page~\pageref{man-condor-submit-notification} of this manual for more
information.

\subsection{Why will my vanilla jobs only run on the machine where I
submitted them from?}

Check the following:
\begin {enumerate}

\item{Did you submit the job from a local filesystem that other
computers can't access?}

See Section~\ref{sec:Shared-Filesystem-Config-File-Entries}, on
page~\pageref{sec:Shared-Filesystem-Config-File-Entries}.

\item{Did you set a special requirements expression for 
vanilla jobs that's preventing them from running but not other jobs?}

See Section~\ref{sec:Shared-Filesystem-Config-File-Entries}, on
page~\pageref{sec:Shared-Filesystem-Config-File-Entries}.

\item{Is Condor running as a non-root user?}

See Section~\ref{sec:Non-Root}, on page~\pageref{sec:Non-Root}.

\end{enumerate}

\subsection{My job starts but exits right away with signal 9.}

\index{job!exiting!signal 9 \(Unix\)|(}

This can occur when the machine your job is running on is missing a
shared library required by your program.
One solution is to install the shared library on all machines the job
may execute on.
Another, easier, solution is to try to re-link your program statically
so it contains all the routines it needs.

\index{job!exiting!signal 9 \(Unix\)|)}

\subsection{Why aren't any or all of my jobs running?}

Problems like the following are often reported to us:

\begin{verbatim}
> I have submitted 100 jobs to my pool, and only 18 appear to be
> running, but there are plenty of machines available.
What should I
> do to investigate the reason why this happens?
\end{verbatim}

Start by following these steps to understand the problem:

\begin{enumerate}

\item Run \Condor{q} -analyze and see what it says.

\item Look at the User Log file (whatever you specified as "log = XXX"
in the submit file).

See if the jobs are starting to run but then exiting right away, or if
they never even start.

\item Look at the SchedLog on the submit machine after it negotiates
for this user.
If a user doesn't have enough priority to get more machines the
SchedLog will contain a message like "lost priority, no more jobs".

\item If jobs are successfully being matched with machines, they
still might be dying when they try to execute due to file permission
problems or the like.
Check the ShadowLog on the submit machine for warnings or errors.

\item Look at the NegotiatorLog during the negotiation for the user.
Look for messages about priority, "no more machines", or similar.

\end{enumerate}

\subsection{Can I submit my standard universe SPARC Solaris 2.6 jobs
and have them run on a SPARC Solaris 2.7 machine?}
\index{Solaris26}
\index{Solaris27}

No. You may only use binary compatibility between SPARC Solaris 2.5.1
and SPARC Solaris 2.6 and between SPARC Solaris 2.7 and SPARC Solaris
2.8, but not between SPARC Solaris 2.6 and SPARC Solaris 2.7.  We may
implement support for this feature in a future release of Condor.

\subsection{Why do my vanilla jobs keep cycling between suspended and
unsuspended?}
\index{vanilla jobs!cycling between suspended and unsuspended}

This is a load sampling error that Condor performs when starting a many
process vanilla job with heavy initial load.
Condor mistakenly decides that the load on the machine has gotten too
high while the job is in the initialization phase and kicks the job off
the machine.

What is needed is a way for Condor to check to see if the load of the machine
has been high over a certain period of time. There is a startd attribute,
\AdAttr{CpuBusyTime} that can be used for this purpose. This macro
returns the time \MacroUNI{CpuBusy}(usually defined in the default
config file) has been true. \MacroUNI{CpuBusy} is defined in terms of
non-Condor load.

To take advantage of this macro, you can use it in your \Macro{SUSPEND}\ macro.
Here is an example:
\begin{verbatim}
SUSPEND = (CpuBusyTime > 3 * $(MINUTE)) && ((CurrentTime - JobStart) > 90)
\end{verbatim}

The above policy says to only suspend the job if the cpu has been busy
with non-Condor load at least three minutes and it has been at least 90
seconds since the start of the job.

\section{Condor on Windows NT / Windows 2000}

\subsection{Will Condor work on a network of mixed Unix and NT machines?}

You can have a Condor pool that consists of both Unix and NT machines.

Your central manager can be either Windows NT or Unix.  For example,
even if you had a pool consisting strictly of Unix machines, you could
use an NT box for your central manager, and vice versa.

You can submit jobs destined to run on Windows NT from either an NT
machine \Bold{or} a Unix machine.  However, at this point in time you
cannot submit jobs destined to run on Unix from NT.  We do plan on
adding this functionality, however.

So, in summary:

\begin{enumerate}

\item{A single Condor pool can consist of both Windows NT and Unix
machines.}

\item{It does not matter at all if your Central Manager is Unix or NT.}

\item{Unix machines can submit jobs to run on other Unix or Windows NT
machines.}

\item{Windows NT machines can only submit jobs which will run on Windows
NT machines.}

\end{enumerate}

\subsection{When I run \Condor{status} I get a communication error, or the
Condor daemon log files report a failure to bind.}

Condor uses the first network interface it sees on your machine.
This problem usually means you have an extra, inactive network
interface (such as a RAS dialup interface) defined before to your
regular network interface.

To solve this problem, either change the order of your network
interfaces in the Control Panel, or explicity set which network
interface Condor should use by adding the following parameter to your
Condor config file:

\begin{verbatim}NETWORK_INTERFACE = ip-address\end{verbatim}

Where ``ip-address'' is the IP address of the interface you wish
Condor to use.

\subsection{My job starts but exits right away with status 128.}
\index{job!exiting!status 128 \(NT\)|(}

This can occur when the machine your job is running on is missing a
DLL (Dynamically Linked Library) required by your program.
The solution is to find the DLL file the program needs and put it in
the TRANSFER\_INPUT\_FILES list in the job's submit file.

To find out what DLLs your program depends on, right-click the program
in Explorer, choose Quickview, and look under ``Import List''.

\index{job!exiting!status 128 \(NT\)|)}

\section{Troubleshooting}

\subsection{What happens if the central manager crashes?} 
\index{crashes|(}
\index{recovery from crashes|(}

If the central manager crashes, jobs that are already running will
continue to run unaffected.
Queued jobs will remain in the queue unharmed, but can not begin
running until the central manager is restarted and begins matchmaking
again.
Nothing special needs to be done after the central manager is brought
back online.

\subsection{When I ssh/telnet to a machine to check particulars of how
Condor is doing something, it is always vacating or unclaimed when I
know a job had been running there!}

Depending on how your policy is set up, Condor will track \emph{any} tty
on the machine for the purpose of determining if a job is to be vacated
or suspended on the machine. It could be the case that after you ssh
there, Condor notices activity on the tty allocated to your connection
and then vacates the job.

\index{crashes|)}
\index{recovery from crashes|)}

\section{Other questions}

\subsection{Is Condor Y2K-compliant?}
\index{Condor!Y2K|(}
\index{Y2K|(}

Yes.
Internally, Condor uses the standard UNIX time representation (the
number of seconds since 1/1/1970) and is not affected by the Y2K bug.
In addition, the Condor tools now correctly display the four-digit
year in their output.

The output of Condor tools from some older versions (pre-6.2) may
display years incorrectly, but their internal representation is still
correct and their display bugs do not affect the operation of Condor.

\index{Condor!Y2K|)}
\index{Y2K|)}

\subsection{Is there a Condor mailing-list?}
\index{Condor!mailing-list|(}
\index{Condor!new versions, notification of|(}

Yes.
We run an extremely low traffic mailing list solely to announce new
versions of Condor.
To subscribe, email \Email{majordomo@cs.wisc.edu} with a message body
of:

\begin{verbatim}subscribe condor-world\end{verbatim}

\index{Condor!mailing list|)}
\index{Condor!new versions, notification of|)}

\subsection{Do you support Globus?}
\index{Globus|(}

Yes, we support a variety of interactions with Globus software,
including running Condor jobs on Globus-managed resources.
At this time, however, we have not released this software publicly.
If you are interested in using Condor with Globus, please send email
to \Email{condor-admin@cs.wisc.edu} and we can provide you with more
information.

\index{Globus|)}

\subsection{What is the process for upgrading from 6.0 to 6.2?}
\index{upgrading!6.0 to 6.2}

The usual process for upgrading is to copy the original 6.0 binaries
to $<$name$>$.old versions and then copy the 6.2 binaries over the 6.0
binaries. The \Condor{master} will automatically(in about 5 minutes)
notice that new binaries have been installed and exec them. Please be sure
to upgrade the config files to match the 6.2 version and pay attention
to copying over your site's specific policy to the new config file. Some
macros and their meanings have changed and need to be addressed in the
upgrade, you may find them in section~\ref{sec:V60-Policy-diffs} of the
manual.

One special note: You must relink your 6.0 standard universe jobs with
the 6.2 supplied libraries. Backwards compatibility to 6.0 from 6.2 had
been intentionally broken because of an evolution of features that the
standard universe now supports.

\subsection{My question isn't in the FAQ!}

If you have any questions that are not listed in this FAQ, try looking
through the rest of the manual.
If you still can't find an answer, feel free to contact us at
\Email{condor-admin@cs.wisc.edu}.

Note that Condor's free email support is provided on a best-effort
basis, and at times we may not be able to provide a timely response.
If guaranteed support is important to you, please inquire about our
paid support services.

\index{Condor!FAQ|)}
\index{Condor!Frequently Asked Questions|)}
\index{FAQ|)}
\index{Frequently Asked Questions|)}
