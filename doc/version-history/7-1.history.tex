%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:History-7-1}Development Release Series 7.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This is the development release series of Condor.
The details of each version are described below.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-1-4}Version 7.1.4}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item None.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item You can now specify ``local'' entries in your condor\_config file
by pre-pending a local name and a period to the normal name.  The
local settings take precedence over the regular settings.  This
``local'' name can be specified on the command line to all daemons via
the new ``-local-name'' command line parameter. 

See section 3.3 ``Configuration'' under ``Configuration File Macros''
for more details on how this ``local name'' will be used in the
configuration, and 3.9.2 ``DaemonCore and Command-Line Arguments'' for
more details on the command line parameter itself.

% PR 947
\item \Condor{submit\_dag} is now automatically run recursively on
nested DAGs (unless the new \Opt{-no\_recurse} option is specified).

% PR 947
\item Added the new \MacroNI{SUBDAG} keyword (for specifying nested
DAGs) to \Condor{dagman}.

\item It is now possible to have multiple rotations of the ``event
  log'' file, such as ``EventLog'', ``EventLog.1'', ``EventLog.2'', ...

\item Condor now supports the ability for the \Condor{master} to run a
  program as it shuts down.  This can be particularly useful for doing
  a graceful shutdown followed, by, say, a reboot.  This is
  accomplished through the new See the new
  \MacroNI{MASTER\_SHUTDOWN\_$<$Name$>$} macro family (see
  \pageref{param:MasterShutdownProgram}) and \Condor{set\_shutdown}
  program.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item Local versions of configuration parameters can now be specified
  via the use of the ``-local-name'' command line parameters (see the
  above ``New Features'' entry).

\item A new configuration parameter
  \MacroNI{EVENT\_LOG\_MAX\_ROTATIONS} has been added to allow
  multiple rotations of the event log file.
  See \pageref{param:EventLogMaxRotations} for details.

\item A new configuration parameter
  \MacroNI{EVENT\_LOG\_ROTATION\_LOCK} has been added to allow
  allow configuration of an alternate file for Condor to use while
  rotating event log files.
  See \pageref{param:EventLogRotationLock} for details.

\item The configuration parameter \MacroNI{MAX\_EVENT\_LOG} has been
  renamed to \MacroNI{EVENT\_LOG\_MAX\_SIZE}.  For backward
  compatibility, if \MacroNI{EVENT\_LOG\_MAX\_SIZE} is not defined,
  Condor will also try \MacroNI{MAX\_EVENT\_LOG}.
  See \pageref{param:EventLogMaxSize} for details.

\item The configuration parameter family
  \MacroNI{MASTER\_SHUTDOWN\_$<$Name$>$} can be used in conjunction
  with \Condor{set\_shutdown} to cause the \Condor{master} to execute
  a specified program as it shuts down.  See
  \pageref{param:MasterShutdownProgram} and \Condor{set\_shutdown}
  manual page for more details.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Fixed a bug where if log line caching was enabled in \Condor{dagman}
and \Condor{dagman} failed during the recovery process, the cache would
stay active. Now the cache is disabled in all cases at the end of recovery.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-1-3}Version 7.1.3}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item This developer release includes the majority of the bug fixes released
	in stable version 7.0.5, including the security patches documented in that
	release.  See section~\ref{sec:New-7-0-5} below.

\item Updated the version of Globus Toolkit: The Condor binaries are now
	linked against Globus v4.2.0.

\item Updated the version of OpenSSL: The Condor binaries are now linked
	against OpenSSL 0.9.8h.

\item Updated the version of GCB: The Condor binaries are now linked
	against GCB 1.5.6.

\item Changes to the \MacroNI{ALLOW\_*} and \MacroNI{DENY\_*} configuration
	variables no longer require the use of the \Opt{-full} option to
	\Condor{reconfig} upon reconfiguration.

\end{itemize}

\noindent New Features:

\begin{itemize}

\item Added a new mechanism termed \Term{Concurrency Limits}.  This
	mechanism allows the Condor pool administrator to define an arbitrary
	number of consumable resources in the configuration file of the
	matchmaker.  The availability of these consumable resources will be taken
	into account during the matchmaking process.  Individual jobs can specify
	how many of each type of consumable resource is required.  
	Typical applications of Concurrency Limits could include management of
	software licenses, database connections, or any other consumable resource
	that is external to Condor.  NOTE: Documentation still being written on
	this feature.

\item Added support for Condor to manage serial high throughput computing
	workloads on the IBM Blue Gene supercomputer.  The IBM Blue Gene/P is now
	a supported platform.

\item Extended Job Hooks (see section~\ref{sec:job-hooks}) to allow for
	alternate transformation and/or monitoring engines for the Job Router (see
	section~\ref{sec:JobRouter}.  Routing is still controlled by the Job
	Router, but if Job Router Hooks are configured, then external programs or
	scripts can be used to transform and monitor the job instead of Condor's
	internal engine.

\item Added support for the new protocol for WS GRAM introduced in Globus
4.2. For each WS GRAM resource, Condor automatically determines whether it's
speaking the 4.0 or 4.2 version of the protocol and responds appropriately.
When setting \SubmitCmd{grid\_resource} in the submit file, use
\SubmitCmd{gt4} for both WS GRAM 4.0 and 4.2.

\item Added the ability for Windows slot users to load and run their jobs
within the context of their profile. 
This includes the \File{My Documents} directory 
hierarchy, its monikers, and the user's registry hive.
To use the profile, add a \SubmitCmd{load\_profile} command to the 
submit description file.  A current restriction prevents the use of
\SubmitCmd{load\_profile} 
in conjunction with \SubmitCmd{run\_as\_owner}. Please refer to 
section~\ref{sec:windows-load-profile} for further details.

\item The \File{StarterLog} file for local universe jobs now displays the job id
in each line in the file, so that interleaved messages relevant to
different jobs running concurrently can be identified.

\item Added the \Opt{-AllowVersionMismatch} command line option to
\Condor{submit\_dag} and \Condor{dagman} to (if absolutely necessary)
allow a version mismatch between \Condor{dagman} and the
\File{.condor.sub} file used to submit it.
This permits a Condor version mismatch between
\Condor{submit\_dag} and \Condor{dagman}).

\item Streamlined the protocol between submit and execute machines; in some
	instances less messages will be exchanged over the network.

\item When network requests are denied because of the authorization
policy, Condor now logs an explanation in the daemon log that denied
the request.  This helps the administrator understand why the policy
denied the request, in case it is not obvious.  A similar explanation
may be logged for requests that are accepted.  This is only generated
if \Macro{D\_SECURITY} is added to the daemon's debug options.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item Added the new configuration variable
\Macro{MAX\_PENDING\_STARTD\_CONTACTS}.  This limits the
number of simultaneous connection attempts by the \Condor{schedd} when
it is requesting claims from the \Condor{startd}s.  The intention is
to protect the \Condor{schedd} from being overloaded by authentication
operations.  The default is 0, which indicates no limit.

\item Added the new configuration variable
\Macro{SEC\_INVALIDATE\_SESSIONS\_VIA\_TCP},  which
defaults to \Expr{True}.  Previously, attempts to use an invalid security
session resulted in a UDP rather than a TCP response.  In networks with
different firewall rules for UDP and TCP, the filtering of the session
invalidation messages was easily overlooked, since it would not
typically happen during the initial vetting of the pool.  If these
packets were filtered out, then at the subsequent \Condor{collector}
restart, no daemons would be able to advertise themselves to the
pool until their existing security sessions expired.  The old behavior
can be achieved by setting this configuration parameter to \Expr{False}.

\item Added the new configuration variable
\Macro{SEC\_ENABLE\_MATCH\_PASSWORD\_AUTHENTICATION}.
This is a special authentication mechanism designed to minimize
overhead in the \Condor{schedd} when communicating with the execute
machine.  Essentially, matchmaking results in a secret being shared
between the \Condor{schedd} and \Condor{startd}, and this is used to
establish a strong security session between the execute and submit
daemons without going through the usual security negotiation protocol.
This is especially important when operating at large scale over high
latency networks, as in a glidein pool with one submit machine and thousands of
execute machines on a network with 0.1 second round trip times.  See
\pageref{param:SecEnableMatchPasswordAuthentication} for
details.

\item Added configuration entry \Macro{GLEXEC\_JOB} which replaces the
	functionality previously encapsulated in \Macro{GLEXEC\_STARTER}.  Using
	\Macro{GLEXEC\_JOB} enables privilege separation in Condor via glexec in a
	manner much more consistent with how Condor's own privilege separation
	mechanism works.  Specifically, the user identity switching will now occur
	between the \Condor{starter} and the actual user job.

\item Added configuration parameter \Macro{AMAZON\_GAHP\_WORKER\_MAX\_NUM}
	to specify a ceiling on the number of threads spawned on the submit
	machine to support jobs running on Amazon EC2.  Defaults to 5.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Includes bug fixes from Condor v7.0.5, including the security fixes.
	See section~\ref{sec:New-7-0-5}.

\item Fixed a bug in the \Condor{schedd} that would cause it to
except if a crontab entry was incorrectly formatted.

\item Fixed a bug in the CondorView server (collector) that caused it
to except (crash) when it received a machine ClassAd without a valid state.
It now logs this under level \MacroNI{D\_ALWAYS} and ignores the ClassAd.

\item Fixed a bug from Condor version 7.1.2 that would cause 
Condor daemons to start
consuming a lot of cpu time after rare types of communication failures
during security negotiation.

\item Fixed a bug from Condor version 7.1.2 that in rare cases could cause
	Condor to fail to recognize when a call to exec() fails on Unix
	platforms.

\item Fixed problems with configuration parameter
	\Macro{JOB\_INHERITS\_STARTER\_ENVIRONMENT} when using PrivSep.

\item Improved the deletion of Amazon EC2 jobs when the server is
	unreachable.

\item Fixed problems with Condor parallel universe jobs when recovering from
	a reboot of the submit machine.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-1-2}Version 7.1.2}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item None.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Added \Procedure{formatTime}, a built-in ClassAd function to create a
  formatted representation of the time.  A detailed description of this
  function is available in section~\ref{sec:classadFunctions}, which
  documents all of the available built-in ClassAd functions.

\item Improved Condor's authentication handshake, so that daemons such
as the \Condor{schedd}, which initiate connections to other daemons,
spend less time waiting for responses.
Authentication over high latency
networks is still rather expensive in Condor, so it still may be
necessary to scale up by running more \Condor{schedd} and \Condor{collector}
daemons than one would need for equivalent workloads on a low latency network.
Additional improvements in this area are planned.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Fixed a memory leak, introduced in Condor version 7.1.1, which caused the
  \Condor{startd} daemon to grow without bound.

% PR 945
\item Fixed a bug in \Condor{dagman} that caused the user log file of
the first node job in a DAG to get created with 0600 permissions,
regardless of the user's umask.  Note that this fix involved removing
the \Opt{-condorlog} and \Opt{-storklog} command-line arguments from
\Condor{submit\_dag} and \Condor{dagman}.

\item Fixed a problem from Condor version 7.1.1 that in some cases caused the
\Condor{starter} to stop sending updates about the job status or
to send updates too frequently.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-1-1}Version 7.1.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item None.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Added a new feature to \Condor{dagman} which caches the log lines
emitted to the dagman.out file when in recovery mode and emits the
cache as one call to the logging subsystem when the cache size limit is
reached. Under NFS conditions, this prevents an open and close per line
of the log and greatly improves performance. This feature is off by
default and is controlled by \Attr{DAGMAN\_DEBUG\_CACHE\_ENABLE}, which
takes a boolean, and  \Attr{DAGMAN\_DEBUG\_CACHE\_SIZE}, which is an
integer in bytes of how big the cache should be before flushing.

\item Included some Windows example jobs (submit files and binaries).

\item Added a new feature to the DAGMan language called splicing. Please
read section~\ref{sec:DAGSplicing} on page \pageref{sec:DAGSplicing}.

\item The Prepare Job Hook can now modify the job ClassAd before execution.
For a complete description of the new hook system, read
section~\ref{sec:job-hooks} on page~\pageref{sec:job-hooks}.

\item Condor now coerces the result of \$\$([]) expressions within
submit description files to strings.
This means that submit files can do simple arithmetic.
For example, you can describe a command-line argument as:

arguments = \$\$([\$(PROCESS)+100])

and \Condor{submit} will expand the argument to be the expected value.

\item Condor daemons now periodically update the \Code{ctime} of their
  log files, instead of the \Code{mtime}, as they previously did.
  At start up, the daemons use this \Code{ctime} 
  to determine how long they may have been down.

\item Added the capability to the \Condor{startd} to allow it to power 
  down machines based a user specified policy.  See 
  section~\ref{sec:power-man} on \pageref{sec:power-man} on
  Power Management for more details.

\item \Condor{off} now supports the \Opt{-peaceful} option for the
  \Condor{schedd}, in addition to the existing support that already existed for
  the \Condor{startd}.  When peacefully shut down,
  the \Condor{schedd} stops starting new
  jobs and waits for all running jobs to finish before exiting.  The
  default shut down behavior is still \Opt{-graceful}, which checkpoints
  and stops all running standard universe jobs and gracefully
  disconnects from other types of jobs in the hopes of later restarting
  and reconnecting to them without any disturbance to the running job.

\item The \Condor{job\_router} now supports deletion of attributes
  when transforming job ClassAds from vanilla to grid universe.  It also
  behaves more deterministically when choosing from multiple possible
  routes.  Rather than picking one at random, it uses a round-robin
  selection.

% PR 941
\item \Condor{dagman} now checks that its submit file was generated by
a \Condor{submit\_dag} with the same version as \Condor{dagman} itself.
It is a fatal error for the versions to differ.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item Added \Attr{DAGMAN\_DEBUG\_CACHE\_ENABLE} and 
  \Attr{DAGMAN\_DEBUG\_CACHE\_SIZE} which allow DAGMan to maintain a
  cache of log lines and write out the cache as one open/write/close
  sequence.  \Attr{DAGMAN\_DEBUG\_CACHE\_ENABLE} is a boolean
  which turns on the ability for caching and defaults to \Expr{False}.
  \Attr{DAGMAN\_DEBUG\_CACHE\_SIZE} is a positive integer and represents
  the size of the cache in bytes and defaults to 5 Megabytes.

\item The existing \Macro{BIND\_ALL\_INTERFACES} configuration variable
  now defaults to \Expr{True}.

\item Added the \Macro{HIBERNATE} expression, which, when evaluated in
  the context of each slot, determines if a machine should enter
  a low power state. See page~\pageref{param:Hibernate} for more 
  information.

\item Added the \Macro{HIBERNATE\_CHECK\_INTERVAL} configuration variable,
  which, if set to a non-zero value, enables the \Condor{startd} to place the 
  machine in a low power state based on the evaluation of the
  \MacroNI{HIBERNATE} expression.  See 
  page~\pageref{param:HibernateCheckInterval} for more information.

\item The existing \Macro{VALID\_SPOOL\_FILES} configuration variable
  now automatically includes \File{SCHEDD.lock},
  the lock file used for high availability \Condor{schedd} fail over.
  Other high availability lock files are not currently included.

\item Added the \Macro{SEC\_DEFAULT\_AUTHENTICATION\_TIMEOUT} configuration
  variable, where the definition \Expr{DEFAULT} may be replaced
  by the usual list of contexts for security settings
  (for example, \Expr{CLIENT}, \Expr{READ}, and \Expr{WRITE}).
  This specifies the number of seconds that Condor should
  allow for the authentication of network connections to complete.
  Previously, GSI authentication was hard-coded to allow 5 minutes
  for authentication.
  Now it uses the same default as all other methods: 20 seconds.

\item Added the \Macro{STARTER\_UPDATE\_INTERVAL\_TIMESLICE} configuration
  variable, which
  specifies the highest fraction of time that the \Condor{starter} should spend
  collecting monitoring information about the job, such as disk usage.
  It defaults to 0.1.  If checking the disk usage of the job takes a
  long time, the \Condor{starter} will monitor less frequently than 
  specified by \MacroNI{STARTER\_UPDATE\_INTERVAL}.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Fixed a bug introduced in 7.1.0 affecting configurations in
which authentication of all communication between the \Condor{shadow}
and \Condor{schedd} is required.  This caused failure in the final update
after the job had finished running.  The result was that the job would return
to the idle state to run again.

\item Fixed a bug in Java universe where each slot would be told to
  potentially use all the memory on the machine.  Now, each JVM 
  receives the physical memory divided by the number of slots.

\item On Windows, slot users would sometimes show up in the Windows Welcome
  Screen.  This has now been resolved.
  The slot users need to be manually
  removed for this to take effect and the machine may need to be rebooted for
  the setting to be honored.

\item Fixed a bug in the ClassAd \Procedure{string} function.
  The function now properly converts integers and floats
  to their string representation.

\item The Windows Installer is now completely internationalized: it will no 
  longer fail to install because of a missing "Users" group; instead, it
  will use the regionally appropriate group.

\item Interoperability with Samba (as a PDC) has been improved.  Condor 
  uses a fast form of login during credential validation.  Unfortunately, 
  this login procedure fails under Samba, even if the credentials are 
  valid.  The new behavior is to attempt the fast login, and on failure, 
  fall back to the slower form.

\item Windows slot users no longer have the Batch Privilege added, nor 
  does Condor first attempt a Batch login for slot users.  This was 
  causing permission problems on hardened versions of Windows, such 
  as Windows Sever 2003, in that not interactive users lacked the 
  permission to run batch files (via the \Prog{cmd.exe} tool). This affected 
  any user submitting jobs that used batch files as the executable.

% issue [#1516]
\item If the \AdAttr{IWD} is not defined in a job classified
  ad that was either fetched by the \Condor{startd} via job hooks, or
  pushed to the \Condor{startd} via COD, the \Condor{starter} no
  longer treats this as a fatal error, and instead uses the temporary
  job execution sandbox as the initial working directory.

% Fixes requested by LIGO
\item Made some fixes to the new-style rescue DAG feature:
\begin{itemize}
\item \Condor{submit\_dag} no longer needs the \Opt{-force} flag if a rescue
DAG will be run, even if the files generated by \Condor{submit\_dag}
already exist.
\item \Condor{submit\_dag} with the \Opt{-force} flag now renames any
existing new-style rescue DAG files, and therefore runs the original DAG.
\end{itemize}

% PR 942
\item Fixed a problem that caused new-style rescue DAGs to fail when
\Condor{submit\_dag} is invoked with the \Opt{-usedagdir} flag.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item The manual now contains Windows installation instructions for
  controlling the configuration for the \SubmitCmd{vm} universe.

\end{itemize}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-1-0}Version 7.1.0}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Upgrading to 7.1.0 from previous versions of Condor will make
existing Standard Universe jobs that have already run fail to match to
machines running Condor 7.1.0 unless the job previously ran on a
machine using the Red Hat 5.0 release of Condor.  This is because the
value of the \Attr{CheckpointPlatform} attribute of the machine
ClassAd has changed in order to better represent checkpoint
compatibility.  If this affects you, you can use \Condor{qedit} to
change the \Attr{LastCheckpointPlatform} attribute of existing
Standard Universe jobs to match the new \Attr{CheckpointPlatform}
advertised by the machine ClassAd where the job last ran.

\item Condor no longer supports root configuration files
(for example, \File{/etc/condor/condor\_config.root},
\File{~condor/condor\_config.root}, and
the file defined by the configuration variable
\MacroNI{LOCAL\_ROOT\_CONFIG\_FILE}).  This feature was intended to
give limited powers to a Unix administrator to configure some aspects
of Condor without gaining root powers.  However, given the flexibility
of the configuration system, we decided that this was not practical.
As long as Condor is started up as root, it should be clearly
understood that whoever has the ability to edit the Condor
configuration files can effectively run arbitrary programs as root.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item In the past, Condor has always sent work to the execute machines
  by pushing jobs to the \Condor{startd}, either from the
  \Condor{schedd} or via \Condor{cod}.
  As of version 7.1.0, The \Condor{startd} now has the ability to pull
  work by fetching jobs via a system of plug-ins or hooks.
  Additional hooks are invoked by the \Condor{starter} to help manage
  work (especially for fetched jobs, but the \Condor{starter} hooks
  can be defined and invoked for other kinds of jobs as well).
  For a complete description of the new hook system, read
  section~\ref{sec:job-hooks} on page~\pageref{sec:job-hooks}.

% PR 888/921
\item Added the capability to insert commands into the \File{.condor.sub}
  file produced by \Condor{submit\_dag} with the \Opt{-append} and
  \Opt{-insert\_sub\_file} command-line arguments to \Condor{submit\_dag} and
  the \Macro{DAGMAN\_INSERT\_SUB\_FILE} configuration variable.
  See the \Condor{submit\_dag} manual page on
  page~\pageref{man-condor-submit-dag}
  and the configuration variable definition on
  page~\pageref{param:DAGManInsertSubFile} for more information.

\item For platforms running a Windows operating system, the \Attr{Arch}
  machine ClassAd attribute more correctly reflects the architectures
  supported.  Instead of values \AdStr{INTEL} and \AdStr{UNDEFINED},
  the values will now be: \AdStr{INTEL} for x86,
  \AdStr{IA64} for Intel Itanium,
  and \AdStr{X86\_64} for both AMD and Intel 64-bit processors.
  These values are listed in the unnumbered subsection labeled
  Machine ClassAd Attributes on page~\pageref{sec:Machine-ClassAd-Attributes}.

\item The Windows MSI installer now supports extended \SubmitCmd{vm} universe 
  options. These new options include: the ability to set the 
  networking type, how much memory the \SubmitCmd{vm} universe can use 
  on a host, and
  the ability to set the version of \Prog{VMware} installed on the host.

\item The \Condor{status} and \Condor{q} command line tools now have a
  version option which prints the version of those specific tools.  This
  can be useful when multiple versions of Condor are installed on the
  same machine.

\item The configuration variable \MacroNI{CONDOR\_VIEW\_HOST} may now
  contain a port number and may (if desired) refer to a
  \Condor{collector} daemon running on the same host as the
  \Condor{collector} that is forwarding ads.  It is also now possible to
  use the forwarded ads for matchmaking purposes.  For example, several
  collectors could forward ads to a single aggregating collector which
  a \Condor{negotiator} then uses as its source of information for
  matchmaking.

% PR 598/788
\item \Condor{dagman} deals with rescue DAGs in a more sophisticated
way; this is especially helpful for nested DAGs.
See the rescue DAG subsection~\pageref{sec:DAGRescue} of the \Condor{dagman}
manual section for more information.

\item Additional logging details for unusual error cases to help 
identify problems.

\item A new (optional) daemon named \Condor{job\_router} has been
added, so far only on Unix.  It may be configured to transform vanilla
universe jobs into grid universe jobs, for example to send excess jobs
to other sites via Condor-C or Condor-G.  For details, see
page~\pageref{sec:JobRouter}.

\item Previously, \condor{q} \Opt{-better-analyze} was supported on most
but not all versions of Linux.  It is now supported on all Unix platforms
but not yet on Windows.

\end{itemize}

\noindent Configuration Variable Additions and Changes:

\begin{itemize}

\item Added new configuration variables
  \MacroNI{ALLOW\_CLIENT} and \MacroNI{DENY\_CLIENT} as
  client-side authorization controls.
  When using a mutual authentication method (such as GSI, SSL, or Kerberos),
  these variables allow the specification of
  which authenticated servers the Condor tools and daemons should
  trust when they form a connection to the server.
  Because of the addition of these variables,
  the GSI-specific, client-side authorization configuration variable
  \Macro{GSI\_DAEMON\_NAME} is retired, and no longer valid.

% PR 921
\item Added the \Macro{DAGMAN\_INSERT\_SUB\_FILE} variable, which allows a file
  of commands to be inserted into \File{.condor.sub} files generated
  by \Condor{submit\_dag}.  See page~\pageref{param:DAGManInsertSubFile}
  for more information.

\item The semantics of \MacroNI{CLAIM\_WORKLIFE} were previously not
clearly defined before the start of the first job.  A delay between
the \Condor{schedd} claiming a slot and the \Condor{shadow} starting a
job could be caused by the submit machine being very busy or by
\MacroNI{JOB\_START\_DELAY}.  Previously, such a delay would
unpredictably result in the first job being rejected if
\MacroNI{CLAIM\_WORKLIFE} expired during that time.  Now,
\MacroNI{CLAIM\_WORKLIFE} is defined to apply only after the first job
has started.  Therefore, setting it to zero has the effect of allowing
exactly one job per claim to run.  The default is still the special
value -1, which places no limit on how long the slot may continue
accepting new jobs from the \Condor{schedd} that claimed it.

% PR 598/788
\item Added the \Macro{DAGMAN\_OLD\_RESCUE} variable, which controls whether
\Condor{dagman} writes rescue DAGs in the old way.  See
page~\pageref{param:DAGManOldRescue} for more information.

% PR 598/788
\item Added the \Macro{DAGMAN\_AUTO\_RESCUE} variable, which controls
whether \Condor{dagman} automatically runs an existing rescue DAG.
See page~\pageref{param:DAGManAutoRescue} for more information.

% PR 598/788
\item Added the \Macro{DAGMAN\_MAX\_RESCUE\_NUM} variable, which
controls the maximum "new-style" rescue DAG number written or
automatically run by \Condor{dagman}.
See page~\pageref{param:DAGManMaxRescueNum} for more information.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item The Condor Build ID is now printed by \Condor{version} and placed 
  in the logs for machines running a Windows operating system.

\item \Condor{quill} and the \Condor{dbmsd} correctly register 
  themselves with the Windows firewall.

% PR 926
\item \Condor{submit\_dag} now avoids possibly running off the end
of the argument list if an argument requiring a value does not have one.

\item The \Condor{submit\_dag} \Opt{-debug} argument now must be
specified with at least \Opt{-de} to avoid conflict with the
\Opt{-dagman} argument.

\item Added missing information about the \Opt{-config} argument to
\Condor{submit\_dag}'s usage message.

% PR 927
\item \Condor{dagman} no longer considers duplicate edges in a DAG a
fatal error (it is now a warning).

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item No hook is invoked if a fetched job does not contain enough data
  to be spawned by a \Condor{starter} or if other errors prevent the
  job from being run after the \Condor{startd} agrees to accept the
  work.
  This limitation will be addressed in a future version of Condor,
  most likely via the addition of a new hook invoked whenever the
  \Condor{starter} fails to spawn a job.
  For more information about the new hook system included in Condor
  version 7.1.0, read section~\ref{sec:job-hooks} on
  page~\pageref{sec:job-hooks}.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item Added \AdStr{WINNT60} for the Vista operating system to
  the documented list of possible values for the machine ClassAd
  attribute \AdAttr{OpSys}.

\end{itemize}

